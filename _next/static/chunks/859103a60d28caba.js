(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";let t,r,a,o,n;var s=e.i(43476),l=e.i(71645);function i(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}async function d(e){return new Promise((t,r)=>{let a=new Image,o=URL.createObjectURL(e);a.onload=()=>{let e=document.createElement("canvas"),n=e.getContext("2d");if(!n){URL.revokeObjectURL(o),r(Error("Canvas context not available"));return}let s=a.width,l=a.height;s>l?s>800&&(l=Math.round(800*l/s),s=800):l>800&&(s=Math.round(800*s/l),l=800),e.width=s,e.height=l,n.drawImage(a,0,0,s,l),e.toBlob(e=>{(URL.revokeObjectURL(o),e)?t(URL.createObjectURL(e)):r(Error("Failed to create blob"))},"image/jpeg",.8)},a.onerror=()=>{URL.revokeObjectURL(o),r(Error("Failed to load image"))},a.src=o})}async function c(e){return new Promise((t,r)=>{let a=new Image,o=URL.createObjectURL(e);a.onload=()=>{let e=document.createElement("canvas"),n=e.getContext("2d");if(!n){URL.revokeObjectURL(o),r(Error("Canvas context not available"));return}let s=a.width,l=a.height;s>l?s>400&&(l=Math.round(400*l/s),s=400):l>400&&(s=Math.round(400*s/l),l=400),e.width=s,e.height=l,n.drawImage(a,0,0,s,l),e.toBlob(e=>{(URL.revokeObjectURL(o),e)?t(URL.createObjectURL(e)):r(Error("Failed to create blob"))},"image/jpeg",.8)},a.onerror=()=>{URL.revokeObjectURL(o),r(Error("Failed to load image"))},a.src=o})}let u=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),m=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let h=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:n,iconNode:s,...i},d)=>(0,l.createElement)("svg",{ref:d,...p,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:u("lucide",o),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(i)&&{"aria-hidden":"true"},...i},[...s.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(n)?n:[n]])),g=(e,t)=>{let r=(0,l.forwardRef)(({className:r,...a},o)=>(0,l.createElement)(h,{ref:o,iconNode:t,className:u(`lucide-${m(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...a}));return r.displayName=m(e),r},f=g("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),b=g("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),x=g("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),v=g("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function y(){let[e,t]=(0,l.useState)(!0),[r,a]=(0,l.useState)(!1),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{t(document.documentElement.classList.contains("dark"))},[]);let n=(0,l.useCallback)(()=>{let e=document.documentElement;e.classList.contains("dark")?(e.classList.remove("dark"),t(!1)):(e.classList.add("dark"),t(!0))},[]),i=(0,l.useCallback)(()=>{if(!r)try{o.current||(o.current=new AudioContext);let e=o.current,t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.value=600,r.gain.value=.08,t.start(e.currentTime),r.gain.exponentialRampToValueAtTime(.001,e.currentTime+.1),t.stop(e.currentTime+.1)}catch{}},[r]),d=(0,l.useCallback)(()=>{a(e=>!e)},[]);return(0,l.useEffect)(()=>{window.__playClick=i,window.__isMuted=r},[i,r]),(0,s.jsxs)("div",{className:"fixed top-4 right-4 z-50 flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:d,className:" p-2.5 rounded-full shadow-lg transition-all hover:scale-110 bg-card text-muted-foreground border border-border hover:text-foreground hover:border-[hsl(var(--primary))] ","aria-label":r?"Unmute":"Mute",children:r?(0,s.jsx)(v,{className:"w-5 h-5 text-destructive"}):(0,s.jsx)(x,{className:"w-5 h-5"})}),(0,s.jsx)("button",{type:"button",onClick:n,className:" p-2.5 rounded-full shadow-lg transition-all hover:scale-110 bg-card text-muted-foreground border border-border hover:text-foreground hover:border-[hsl(var(--primary))] ","aria-label":e?"Switch to light mode":"Switch to dark mode",children:e?(0,s.jsx)(b,{className:"w-5 h-5 text-yellow-400"}):(0,s.jsx)(f,{className:"w-5 h-5 text-orange-400"})})]})}let w=g("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),k=g("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),j=g("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),N=g("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);function C(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var M=((n=l.forwardRef((e,t)=>{let{children:r,...a}=e;if(l.isValidElement(r)){var o;let e,n,s=(o=r,(n=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(n=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),i=function(e,t){let r={...t};for(let a in t){let o=e[a],n=t[a];/^on[A-Z]/.test(a)?o&&n?r[a]=(...e)=>{let t=n(...e);return o(...e),t}:o&&(r[a]=o):"style"===a?r[a]={...o,...n}:"className"===a&&(r[a]=[o,n].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==l.Fragment&&(i.ref=t?function(...e){return t=>{let r=!1,a=e.map(e=>{let a=C(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():C(e[t],null)}}}}(t,s):s),l.cloneElement(r,i)}return l.Children.count(r)>1?l.Children.only(null):null})).displayName="Slot.SlotClone",t=n,(r=l.forwardRef((e,r)=>{let{children:a,...o}=e,n=l.Children.toArray(a),i=n.find(R);if(i){let e=i.props.children,a=n.map(t=>t!==i?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...o,ref:r,children:l.isValidElement(e)?l.cloneElement(e,void 0,a):null})}return(0,s.jsx)(t,{...o,ref:r,children:a})})).displayName="Slot.Slot",r),z=Symbol("radix.slottable");function R(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===z}function E(){for(var e,t,r=0,a="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=function e(t){var r,a,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=e(t[r]))&&(o&&(o+=" "),o+=a)}else for(a in t)t[a]&&(o&&(o+=" "),o+=a);return o}(e))&&(a&&(a+=" "),a+=t);return a}let S=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,T=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),L=[],A=(e,t,r)=>{if(0==e.length-t)return r.classGroupId;let a=e[t],o=r.nextPart.get(a);if(o){let r=A(e,t+1,o);if(r)return r}let n=r.validators;if(null===n)return;let s=0===t?e.join("-"):e.slice(t).join("-"),l=n.length;for(let e=0;e<l;e++){let t=n[e];if(t.validator(s))return t.classGroupId}},U=(e,t)=>{let r=T();for(let a in e)$(e[a],r,a,t);return r},$=(e,t,r,a)=>{let o=e.length;for(let n=0;n<o;n++)_(e[n],t,r,a)},_=(e,t,r,a)=>{"string"==typeof e?I(e,t,r):"function"==typeof e?O(e,t,r,a):P(e,t,r,a)},I=(e,t,r)=>{(""===e?t:D(t,e)).classGroupId=r},O=(e,t,r,a)=>{G(e)?$(e(a),t,r,a):(null===t.validators&&(t.validators=[]),t.validators.push({classGroupId:r,validator:e}))},P=(e,t,r,a)=>{let o=Object.entries(e),n=o.length;for(let e=0;e<n;e++){let[n,s]=o[e];$(s,D(t,n),r,a)}},D=(e,t)=>{let r=e,a=t.split("-"),o=a.length;for(let e=0;e<o;e++){let t=a[e],o=r.nextPart.get(t);o||(o=T(),r.nextPart.set(t,o)),r=o}return r},G=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,B=[],W=(e,t,r,a,o)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:a,isExternal:o}),q=/\s+/,H=e=>{let t;if("string"==typeof e)return e;let r="";for(let a=0;a<e.length;a++)e[a]&&(t=H(e[a]))&&(r&&(r+=" "),r+=t);return r},F=[],V=e=>{let t=t=>t[e]||F;return t.isThemeGetter=!0,t},K=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,X=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Z=/^\d+\/\d+$/,Q=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,J=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Y=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,et=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,er=e=>Z.test(e),ea=e=>!!e&&!Number.isNaN(Number(e)),eo=e=>!!e&&Number.isInteger(Number(e)),en=e=>e.endsWith("%")&&ea(e.slice(0,-1)),es=e=>Q.test(e),el=()=>!0,ei=e=>J.test(e)&&!Y.test(e),ed=()=>!1,ec=e=>ee.test(e),eu=e=>et.test(e),em=e=>!eh(e)&&!ey(e),ep=e=>ez(e,eT,ed),eh=e=>K.test(e),eg=e=>ez(e,eL,ei),ef=e=>ez(e,eA,ea),eb=e=>ez(e,eE,ed),ex=e=>ez(e,eS,eu),ev=e=>ez(e,e$,ec),ey=e=>X.test(e),ew=e=>eR(e,eL),ek=e=>eR(e,eU),ej=e=>eR(e,eE),eN=e=>eR(e,eT),eC=e=>eR(e,eS),eM=e=>eR(e,e$,!0),ez=(e,t,r)=>{let a=K.exec(e);return!!a&&(a[1]?t(a[1]):r(a[2]))},eR=(e,t,r=!1)=>{let a=X.exec(e);return!!a&&(a[1]?t(a[1]):r)},eE=e=>"position"===e||"percentage"===e,eS=e=>"image"===e||"url"===e,eT=e=>"length"===e||"size"===e||"bg-size"===e,eL=e=>"length"===e,eA=e=>"number"===e,eU=e=>"family-name"===e,e$=e=>"shadow"===e,e_=((e,...t)=>{let r,a,o,n,s=e=>{let t=a(e);if(t)return t;let n=((e,t)=>{let{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:o,sortModifiers:n}=t,s=[],l=e.trim().split(q),i="";for(let e=l.length-1;e>=0;e-=1){let t=l[e],{isExternal:d,modifiers:c,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:p}=r(t);if(d){i=t+(i.length>0?" "+i:i);continue}let h=!!p,g=a(h?m.substring(0,p):m);if(!g){if(!h||!(g=a(m))){i=t+(i.length>0?" "+i:i);continue}h=!1}let f=0===c.length?"":1===c.length?c[0]:n(c).join(":"),b=u?f+"!":f,x=b+g;if(s.indexOf(x)>-1)continue;s.push(x);let v=o(g,h);for(let e=0;e<v.length;++e){let t=v[e];s.push(b+t)}i=t+(i.length>0?" "+i:i)}return i})(e,r);return o(e,n),n};return n=l=>{var i;let d;return a=(r={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=Object.create(null),a=Object.create(null),o=(o,n)=>{r[o]=n,++t>e&&(t=0,a=r,r=Object.create(null))};return{get(e){let t=r[e];return void 0!==t?t:void 0!==(t=a[e])?(o(e,t),t):void 0},set(e,t){e in r?r[e]=t:o(e,t)}}})((i=t.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:r}=e,a=e=>{let t,r=[],a=0,o=0,n=0,s=e.length;for(let l=0;l<s;l++){let s=e[l];if(0===a&&0===o){if(":"===s){r.push(e.slice(n,l)),n=l+1;continue}if("/"===s){t=l;continue}}"["===s?a++:"]"===s?a--:"("===s?o++:")"===s&&o--}let l=0===r.length?e:e.slice(n),i=l,d=!1;return l.endsWith("!")?(i=l.slice(0,-1),d=!0):l.startsWith("!")&&(i=l.slice(1),d=!0),W(r,d,i,t&&t>n?t-n:void 0)};if(t){let e=t+":",r=a;a=t=>t.startsWith(e)?r(t.slice(e.length)):W(B,!1,t,void 0,!0)}if(r){let e=a;a=t=>r({className:t,parseClassName:e})}return a})(i),sortModifiers:(d=new Map,i.orderSensitiveModifiers.forEach((e,t)=>{d.set(e,1e6+t)}),e=>{let t=[],r=[];for(let a=0;a<e.length;a++){let o=e[a],n="["===o[0],s=d.has(o);n||s?(r.length>0&&(r.sort(),t.push(...r),r=[]),t.push(o)):r.push(o)}return r.length>0&&(r.sort(),t.push(...r)),t}),...(e=>{let t=(e=>{let{theme:t,classGroups:r}=e;return U(r,t)})(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]")){var r;let t,a,o;return -1===(r=e).slice(1,-1).indexOf(":")?void 0:(a=(t=r.slice(1,-1)).indexOf(":"),(o=t.slice(0,a))?"arbitrary.."+o:void 0)}let a=e.split("-"),o=+(""===a[0]&&a.length>1);return A(a,o,t)},getConflictingClassGroupIds:(e,t)=>{if(t){let t=a[e],o=r[e];if(t){if(o){let e=Array(o.length+t.length);for(let t=0;t<o.length;t++)e[t]=o[t];for(let r=0;r<t.length;r++)e[o.length+r]=t[r];return e}return t}return o||L}return r[e]||L}}})(i)}).cache.get,o=r.cache.set,n=s,s(l)},(...e)=>n(((...e)=>{let t,r,a=0,o="";for(;a<e.length;)(t=e[a++])&&(r=H(t))&&(o&&(o+=" "),o+=r);return o})(...e))})(()=>{let e=V("color"),t=V("font"),r=V("text"),a=V("font-weight"),o=V("tracking"),n=V("leading"),s=V("breakpoint"),l=V("container"),i=V("spacing"),d=V("radius"),c=V("shadow"),u=V("inset-shadow"),m=V("text-shadow"),p=V("drop-shadow"),h=V("blur"),g=V("perspective"),f=V("aspect"),b=V("ease"),x=V("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[...y(),ey,eh],k=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],N=()=>[ey,eh,i],C=()=>[er,"full","auto",...N()],M=()=>[eo,"none","subgrid",ey,eh],z=()=>["auto",{span:["full",eo,ey,eh]},eo,ey,eh],R=()=>[eo,"auto",ey,eh],E=()=>["auto","min","max","fr",ey,eh],S=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],T=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...N()],A=()=>[er,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],U=()=>[e,ey,eh],$=()=>[...y(),ej,eb,{position:[ey,eh]}],_=()=>["no-repeat",{repeat:["","x","y","space","round"]}],I=()=>["auto","cover","contain",eN,ep,{size:[ey,eh]}],O=()=>[en,ew,eg],P=()=>["","none","full",d,ey,eh],D=()=>["",ea,ew,eg],G=()=>["solid","dashed","dotted","double"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[ea,en,ej,eb],q=()=>["","none",h,ey,eh],H=()=>["none",ea,ey,eh],F=()=>["none",ea,ey,eh],K=()=>[ea,ey,eh],X=()=>[er,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[es],breakpoint:[es],color:[el],container:[es],"drop-shadow":[es],ease:["in","out","in-out"],font:[em],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[es],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[es],shadow:[es],spacing:["px",ea],text:[es],"text-shadow":[es],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",er,eh,ey,f]}],container:["container"],columns:[{columns:[ea,eh,ey,l]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[eo,"auto",ey,eh]}],basis:[{basis:[er,"full","auto",l,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ea,er,"auto","initial","none",eh]}],grow:[{grow:["",ea,ey,eh]}],shrink:[{shrink:["",ea,ey,eh]}],order:[{order:[eo,"first","last","none",ey,eh]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":E()}],"auto-rows":[{"auto-rows":E()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...S(),"normal"]}],"justify-items":[{"justify-items":[...T(),"normal"]}],"justify-self":[{"justify-self":["auto",...T()]}],"align-content":[{content:["normal",...S()]}],"align-items":[{items:[...T(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...T(),{baseline:["","last"]}]}],"place-content":[{"place-content":S()}],"place-items":[{"place-items":[...T(),"baseline"]}],"place-self":[{"place-self":["auto",...T()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:A()}],w:[{w:[l,"screen",...A()]}],"min-w":[{"min-w":[l,"screen","none",...A()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[s]},...A()]}],h:[{h:["screen","lh",...A()]}],"min-h":[{"min-h":["screen","lh","none",...A()]}],"max-h":[{"max-h":["screen","lh",...A()]}],"font-size":[{text:["base",r,ew,eg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,ey,ef]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",en,eh]}],"font-family":[{font:[ek,eh,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ey,eh]}],"line-clamp":[{"line-clamp":[ea,"none",ey,ef]}],leading:[{leading:[n,...N()]}],"list-image":[{"list-image":["none",ey,eh]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ey,eh]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:[ea,"from-font","auto",ey,eg]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[ea,"auto",ey,eh]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ey,eh]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ey,eh]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$()}],"bg-repeat":[{bg:_()}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},eo,ey,eh],radial:["",ey,eh],conic:[eo,ey,eh]},eC,ex]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:D()}],"border-w-x":[{"border-x":D()}],"border-w-y":[{"border-y":D()}],"border-w-s":[{"border-s":D()}],"border-w-e":[{"border-e":D()}],"border-w-t":[{"border-t":D()}],"border-w-r":[{"border-r":D()}],"border-w-b":[{"border-b":D()}],"border-w-l":[{"border-l":D()}],"divide-x":[{"divide-x":D()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":D()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...G(),"hidden","none"]}],"divide-style":[{divide:[...G(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...G(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ea,ey,eh]}],"outline-w":[{outline:["",ea,ew,eg]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",c,eM,ev]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",u,eM,ev]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[ea,eg]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":D()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",m,eM,ev]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[ea,ey,eh]}],"mix-blend":[{"mix-blend":[...B(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":B()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ea]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[ey,eh]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":y()}],"mask-image-conic-pos":[{"mask-conic":[ea]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$()}],"mask-repeat":[{mask:_()}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ey,eh]}],filter:[{filter:["","none",ey,eh]}],blur:[{blur:q()}],brightness:[{brightness:[ea,ey,eh]}],contrast:[{contrast:[ea,ey,eh]}],"drop-shadow":[{"drop-shadow":["","none",p,eM,ev]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",ea,ey,eh]}],"hue-rotate":[{"hue-rotate":[ea,ey,eh]}],invert:[{invert:["",ea,ey,eh]}],saturate:[{saturate:[ea,ey,eh]}],sepia:[{sepia:["",ea,ey,eh]}],"backdrop-filter":[{"backdrop-filter":["","none",ey,eh]}],"backdrop-blur":[{"backdrop-blur":q()}],"backdrop-brightness":[{"backdrop-brightness":[ea,ey,eh]}],"backdrop-contrast":[{"backdrop-contrast":[ea,ey,eh]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ea,ey,eh]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ea,ey,eh]}],"backdrop-invert":[{"backdrop-invert":["",ea,ey,eh]}],"backdrop-opacity":[{"backdrop-opacity":[ea,ey,eh]}],"backdrop-saturate":[{"backdrop-saturate":[ea,ey,eh]}],"backdrop-sepia":[{"backdrop-sepia":["",ea,ey,eh]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ey,eh]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ea,"initial",ey,eh]}],ease:[{ease:["linear","initial",b,ey,eh]}],delay:[{delay:[ea,ey,eh]}],animate:[{animate:["none",x,ey,eh]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,ey,eh]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:H()}],"rotate-x":[{"rotate-x":H()}],"rotate-y":[{"rotate-y":H()}],"rotate-z":[{"rotate-z":H()}],scale:[{scale:F()}],"scale-x":[{"scale-x":F()}],"scale-y":[{"scale-y":F()}],"scale-z":[{"scale-z":F()}],"scale-3d":["scale-3d"],skew:[{skew:K()}],"skew-x":[{"skew-x":K()}],"skew-y":[{"skew-y":K()}],transform:[{transform:[ey,eh,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:X()}],"translate-x":[{"translate-x":X()}],"translate-y":[{"translate-y":X()}],"translate-z":[{"translate-z":X()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ey,eh]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ey,eh]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[ea,ew,eg,ef]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}),eI=(a="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",o={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==o?void 0:o.variants)==null)return E(a,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:n}=o,s=Object.keys(r).map(t=>{let a=null==e?void 0:e[t],o=null==n?void 0:n[t];if(null===a)return null;let s=S(a)||S(o);return r[t][s]}),l=e&&Object.entries(e).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return E(a,s,null==o||null==(t=o.compoundVariants)?void 0:t.reduce((e,t)=>{let{class:r,className:a,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...l}[t]):({...n,...l})[t]===r})?[...e,r,a]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),eO=l.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...o},n)=>(0,s.jsx)(a?M:"button",{className:function(...e){return e_(E(e))}(eI({variant:t,size:r,className:e})),ref:n,...o}));eO.displayName="Button";let eP={isMuted:!1,audioInstances:new Map,init(){[{key:"swipe",path:"/assets/swipe.wav",volume:.2},{key:"button",path:"/assets/button.wav",volume:.2},{key:"toggle_off",path:"/assets/toggle_off.wav",volume:.2},{key:"tap",path:"/assets/tap_05.wav",volume:.2}].forEach(({key:e,path:t,volume:r})=>{let a=new Audio(t);a.volume=r,this.audioInstances.set(e,a)})},play(e){if(this.isMuted)return;let t=this.audioInstances.get(e);t&&(t.currentTime=0,t.play().catch(()=>{}))},toggleMute(){this.isMuted=!this.isMuted}};function eD({images:e,isProcessing:t=!1,processingCount:r=0,onAddImages:a,onDeleteImage:o,onClearAll:n,onStart:i}){let d=(0,l.useRef)(null),[c,u]=(0,l.useState)(!1),m=(0,l.useRef)(!1);(0,l.useEffect)(()=>{m.current||(eP.init(),m.current=!0)},[]);let p=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1),eP.play("swipe"),a(e.dataTransfer.files)},[a]),h=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!0)},[]),g=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1)},[]);return(0,s.jsx)("div",{className:"animate-fade-in",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight mb-1 bg-gradient-to-r from-[#10b981] via-[#22c55e] to-[#84cc16] bg-clip-text text-transparent",children:"Image Sort"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"統計的に好きな画像を推定"})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 md:p-8 shadow-lg",children:[(0,s.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>d.current?.click(),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&d.current?.click()},onDrop:p,onDragOver:h,onDragLeave:g,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:`
              relative border-2 border-dashed rounded-xl p-10 md:p-12 text-center cursor-pointer
              transition-all duration-200 group mb-6
              ${c?"border-[hsl(var(--primary))] bg-accent/50 scale-[1.01]":"border-border hover:border-[hsl(var(--primary))] hover:bg-emerald-500/10"}
            `,children:[(0,s.jsx)("input",{ref:d,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>{e.target.files&&(eP.play("swipe"),a(e.target.files)),e.target.value=""}}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)("div",{className:`
                w-14 h-14 rounded-full flex items-center justify-center transition-colors
                ${c?"bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))]":"bg-muted text-muted-foreground group-hover:bg-emerald-500 group-hover:text-emerald-50"}
              `,children:(0,s.jsx)(w,{className:`w-6 h-6 ${c?"text-[hsl(var(--primary-foreground))]":"text-muted-foreground"} group-hover:text-emerald-50`})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-foreground font-medium",children:"画像をタップまたはドロップして追加"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"枚数が多いほど選別効果が高まります"})]}),(0,s.jsx)("div",{className:`text-xs font-mono px-3 py-1 rounded-full ${e.length>0?"bg-emerald-500/10 text-emerald-600 border border-emerald-500/30":"text-muted-foreground bg-muted"}`,children:e.length>0?`読み込み済み: ${e.length}枚`:"画像数: 0"})]})]}),e.length>0&&(0,s.jsxs)("div",{className:"bg-muted/50 rounded-xl p-4 border border-border min-h-[100px] relative",children:[e.length>=2&&(0,s.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,s.jsx)("button",{type:"button",onClick:()=>{confirm("全削除しますか？")&&(eP.play("toggle_off"),n())},className:"w-6 h-6 bg-muted text-muted-foreground rounded-full flex items-center justify-center hover:bg-muted/80 hover:text-muted-foreground/80 transition-colors shadow-md","aria-label":"全削除",children:(0,s.jsx)(j,{className:"w-3.5 h-3.5"})})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:e.map(e=>(0,s.jsx)("div",{className:"relative group/thumb animate-pop",children:(0,s.jsxs)("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden bg-secondary border border-border shadow-sm",children:[(0,s.jsx)("img",{src:e.src||"/placeholder.svg",alt:e.name,className:"w-full h-full object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/30 rounded-lg opacity-0 group-hover/thumb:opacity-100 transition-opacity flex items-center justify-center",children:(0,s.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),eP.play("toggle_off"),o(e.id)},className:"w-6 h-6 bg-destructive text-destructive-foreground rounded-full flex items-center justify-center hover:bg-destructive/90 transition-colors shadow-md","aria-label":`Delete ${e.name}`,children:(0,s.jsx)(k,{className:"w-3.5 h-3.5"})})})]})},e.id))})]}),(0,s.jsxs)("div",{className:"mt-8 flex flex-col items-center gap-3",children:[(0,s.jsx)(eO,{onClick:()=>{eP.play("button"),i()},disabled:e.length<2||t,variant:e.length>=2?"default":"secondary",className:`
                px-10 py-3.5 rounded-full text-base font-bold
                transition-all duration-500 ease-in-out
                shadow-lg
                ${e.length>=2&&!t?"bg-emerald-500 text-white hover:bg-emerald-600 hover:-translate-y-0.5 transition-all shadow-lg animate-pulse-glow":"bg-muted text-muted-foreground hover:bg-muted/80 hover:text-muted-foreground/80"}
              `,children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(N,{className:"w-4 h-4"}),"測定開始",(0,s.jsx)("span",{className:"text-xs opacity-70 font-normal",children:"(Enter)"})]})}),t&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-muted-foreground border-t-primary rounded-full animate-spin"}),(0,s.jsxs)("span",{children:["画像を最適化中... (",r,"枚処理中)"]})]})]})]})]})})}let eG=g("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),eB=g("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),eW=g("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),eq=g("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),eH={isMuted:!1,audioInstances:new Map,init(){[{key:"swipe",path:"/assets/swipe.wav",volume:.2},{key:"button",path:"/assets/button.wav",volume:.5},{key:"celebration",path:"/assets/celebration.wav",volume:.1},{key:"toggle_off",path:"/assets/toggle_off.wav",volume:.2},{key:"tap",path:"/assets/tap_05.wav",volume:.5},{key:"pass",path:"/assets/toggle_off.wav",volume:.15}].forEach(({key:e,path:t,volume:r})=>{let a=new Audio(t);a.volume=r,this.audioInstances.set(e,a)})},play(e){if(this.isMuted)return;let t=this.audioInstances.get(e);t&&(t.currentTime=0,t.play().catch(()=>{}))},toggleMute(){this.isMuted=!this.isMuted}};function eF({currentGroup:e,currentPhase:t,globalPassStreak:r,progressInfo:a,shaking:o,canUndo:n,onChoose:i,onPass:d,onUndo:c,onFinishEarly:u,onQuit:m}){let{activeCount:p,frozenCount:h,progress:g}=a,f="exploration"===t,b=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{b.current||(eH.init(),b.current=!0)},[]),(0,s.jsxs)("div",{className:"w-full max-w-6xl mx-auto text-center py-2 animate-fade-in",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground tracking-tight",children:"一番好きなのは？"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1.5",children:[(0,s.jsx)("span",{className:`
              text-xs font-mono px-2.5 py-1 rounded-full border transition-colors duration-300
              ${f?"bg-blue-500/10 text-blue-400 border-blue-500/20":"bg-[hsl(var(--primary))]/10 text-[hsl(var(--primary))] border-[hsl(var(--primary))]/20"}
            `,children:f?"探索 (6択)":"精密 (4択)"}),(0,s.jsxs)("span",{className:"text-xs font-mono px-2.5 py-1 rounded-full bg-muted text-muted-foreground border border-border",children:["残り: ",p,h>0&&` (殿堂: ${h})`]})]}),2===r&&(0,s.jsx)("div",{className:"text-xs text-destructive mt-2 font-bold animate-pulse",children:"選択停滞中: 次もパスで強制終了します"})]}),(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto mb-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-[10px] text-muted-foreground mb-1.5 px-0.5",children:[(0,s.jsx)("span",{children:"分析進捗 (不確実性の減少)"}),(0,s.jsxs)("span",{className:"font-mono",children:[g,"%"]})]}),(0,s.jsx)("div",{className:"bg-secondary rounded-full h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-[hsl(var(--primary))] transition-all duration-500 ease-out",style:{width:`${g}%`}})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:`
            grid gap-1 w-full px-1 md:px-0 transition-all duration-300
            ${e.length>4?"grid-cols-2 md:grid-cols-3":"grid-cols-2 md:grid-cols-4"}
            ${o?"animate-shake":""}
          `,style:{minHeight:"50vh"},children:e.map((e,t)=>(0,s.jsxs)("button",{type:"button",onClick:()=>{eH.play("button"),i(e.id)},onMouseEnter:()=>eH.play("tap"),className:"   relative group cursor-pointer bg-card rounded-xl border-2 border-transparent   hover:border-[hsl(var(--primary))] overflow-hidden transition-all duration-200   hover:-translate-y-1 hover:shadow-xl animate-pop flex flex-col   focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring   ",style:{animationDelay:`${.05*t}s`},children:[(0,s.jsx)("div",{className:"absolute top-2 left-2 z-10 w-6 h-6 rounded-md bg-foreground/70 backdrop-blur-sm text-background text-xs font-bold flex items-center justify-center shadow-sm",children:t+1}),(0,s.jsx)("div",{className:"flex-1 w-full relative overflow-hidden bg-muted/30",style:{minHeight:"320px"},children:(0,s.jsx)("img",{src:e.thumbnailUrl||e.src||"/placeholder.svg",alt:e.name,decoding:"async",className:"absolute inset-0 w-full h-full object-contain p-2 transition-transform duration-300 group-hover:scale-[1.03]",onMouseEnter:()=>eH.play("tap"),loading:"eager",onError:e=>{e.target.src="/placeholder.svg"}})}),(0,s.jsx)("div",{className:"bg-card/95 backdrop-blur-sm p-2.5 text-center border-t border-border shrink-0",children:(0,s.jsx)("div",{className:"font-medium text-card-foreground text-xs md:text-sm truncate group-hover:text-[hsl(var(--primary))] transition-colors",children:e.name})})]},e.id))}),(0,s.jsx)("div",{className:`
            grid gap-1 w-full px-1 md:px-0 absolute inset-0 transition-all duration-300
            ${e.length>4?"grid-cols-2 md:grid-cols-3":"grid-cols-2 md:grid-cols-4"}
            opacity-0 pointer-events-none
          `,style:{minHeight:"50vh"},children:e.map((e,t)=>(0,s.jsxs)("button",{type:"button",onClick:()=>{eH.play("button"),i(e.id)},onMouseEnter:()=>eH.play("tap"),className:"   relative group cursor-pointer bg-card rounded-xl border-2 border-transparent   hover:border-[hsl(var(--primary))] overflow-hidden transition-all duration-200   hover:-translate-y-1 hover:shadow-xl animate-pop flex flex-col   focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring   ",style:{animationDelay:`${.05*t}s`},children:[(0,s.jsx)("div",{className:"absolute top-2 left-2 z-10 w-6 h-6 rounded-md bg-foreground/70 backdrop-blur-sm text-background text-xs font-bold flex items-center justify-center shadow-sm",children:t+1}),(0,s.jsx)("div",{className:"flex-1 w-full relative overflow-hidden bg-muted/30",style:{minHeight:"320px"},children:(0,s.jsx)("img",{src:e.src||"/placeholder.svg",alt:e.name,decoding:"async",className:"absolute inset-0 w-full h-full object-contain p-2 transition-transform duration-300 group-hover:scale-[1.03]",onMouseEnter:()=>eH.play("tap")})}),(0,s.jsx)("div",{className:"bg-card/95 backdrop-blur-sm p-2.5 text-center border-t border-border shrink-0",children:(0,s.jsx)("div",{className:"font-medium text-card-foreground text-xs md:text-sm truncate group-hover:text-[hsl(var(--primary))] transition-colors",children:e.name})})]},e.id))})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-wrap justify-center items-center gap-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{eH.play("toggle_off"),c()},disabled:!n,className:"   px-7 py-2.5 rounded-full font-bold   bg-secondary text-secondary-foreground   hover:bg-secondary/80 transition-all   disabled:opacity-40 disabled:cursor-not-allowed   flex items-center gap-1.5   ",children:[(0,s.jsx)(eG,{className:"w-4 h-4"}),"戻る",(0,s.jsx)("span",{className:"text-[10px] opacity-60",children:"(BS)"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{eH.play("pass"),d()},className:"   px-7 py-2.5 rounded-full font-bold   bg-destructive/10 text-destructive border border-destructive/20   hover:bg-destructive/20 active:translate-y-0 transition-all   flex items-center gap-1.5   ",children:[(0,s.jsx)(eB,{className:"w-4 h-4"}),"ピンとこない",(0,s.jsx)("span",{className:"text-[10px] opacity-60 font-normal",children:"(Space)"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{eH.play("button"),u()},className:"   px-7 py-2.5 rounded-full font-bold   border border-[hsl(var(--primary))] text-[hsl(var(--primary))]   hover:bg-accent transition-all   flex items-center gap-1.5   ",children:[(0,s.jsx)(eW,{className:"w-4 h-4"}),"結果を見る",(0,s.jsx)("span",{className:"text-[10px] opacity-60",children:"(Enter)"})]})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsxs)("button",{type:"button",onClick:()=>{eH.play("toggle_off"),m()},className:"text-xs text-muted-foreground hover:text-destructive transition-colors flex items-center gap-1 mx-auto",children:[(0,s.jsx)(eq,{className:"w-3 h-3"}),"最初に戻る"]})})]})}let eV=g("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),eK=g("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),eX=g("swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),eZ=g("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),eQ={isMuted:!1,audioInstances:new Map,init(){[{key:"button",path:"/assets/button.wav",volume:.5},{key:"tap",path:"/assets/tap_05.wav",volume:.5},{key:"celebration",path:"/assets/celebration.wav",volume:.1},{key:"toggle_off",path:"/assets/toggle_off.wav",volume:.2},{key:"swipe",path:"/assets/swipe.wav",volume:.2}].forEach(({key:e,path:t,volume:r})=>{let a=new Audio(t);a.volume=r,this.audioInstances.set(e,a)})},play(e){if(this.isMuted)return;let t=this.audioInstances.get(e);t&&(t.currentTime=0,t.play().catch(()=>{}))},toggleMute(){this.isMuted=!this.isMuted}},eJ=[{id:"S",name:"S",desc:"決定的に好き",minReff:1650,color:"text-purple-400",bgClass:"bg-purple-500/5 border-purple-500/20",badgeClass:"bg-purple-500/15 text-purple-400 border-purple-500/30",gradientClass:"gradient-bar-purple"},{id:"A",name:"A",desc:"安定的に好き",minReff:1550,color:"text-blue-400",bgClass:"bg-blue-500/5 border-blue-500/20",badgeClass:"bg-blue-500/15 text-blue-400 border-blue-500/30",gradientClass:"gradient-bar-blue"},{id:"B",name:"B",desc:"統計的に好き",minReff:1450,color:"text-emerald-400",bgClass:"bg-emerald-500/5 border-emerald-500/20",badgeClass:"bg-emerald-500/15 text-emerald-400 border-emerald-500/30",gradientClass:"gradient-bar-emerald"},{id:"C",name:"C",desc:"判断保留",minReff:1350,color:"text-muted-foreground",bgClass:"bg-muted/50 border-border",badgeClass:"bg-muted text-muted-foreground border-border",gradientClass:"gradient-bar-slate"},{id:"D",name:"D",desc:"選考外",minReff:-9999,color:"text-muted-foreground/60",bgClass:"bg-muted/30 border-border/50",badgeClass:"bg-muted/50 text-muted-foreground/60 border-border/50",gradientClass:"gradient-bar-gray"}];function eY({type:e}){return"GOD"===e?(0,s.jsxs)("span",{className:"inline-flex items-center gap-0.5 bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 text-[8px] px-1 py-px rounded-full font-bold leading-none",children:[(0,s.jsx)(eK,{className:"w-2 h-2"})," 別格"]}):"STRONG"===e?(0,s.jsxs)("span",{className:"inline-flex items-center gap-0.5 bg-purple-500/20 text-purple-400 border border-purple-500/30 text-[8px] px-1 py-px rounded-full font-bold leading-none",children:[(0,s.jsx)(eX,{className:"w-2 h-2"})," 安定"]}):"STAT"===e?(0,s.jsxs)("span",{className:"inline-flex items-center gap-0.5 bg-emerald-500/20 text-emerald-400 border border-emerald-500/30 text-[8px] px-1 py-px rounded-full font-bold leading-none",children:[(0,s.jsx)(eZ,{className:"w-2 h-2"})," 統計"]}):null}function e0({image:e,onClose:t}){return e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-md flex items-center justify-center p-4 animate-fade-in cursor-pointer",onClick:t,onKeyDown:e=>"Escape"===e.key&&t(),role:"button",tabIndex:0,children:(0,s.jsxs)("div",{className:"relative w-auto h-auto max-w-[95vw] max-h-[95vh] flex flex-col items-center justify-center",children:[(0,s.jsx)("button",{type:"button",className:"absolute -top-10 right-0 md:top-0 md:-right-12 z-50 w-8 h-8 rounded-full bg-secondary text-foreground hover:bg-secondary/80 flex items-center justify-center transition-colors shadow-lg border border-border",onClick:e=>{e.stopPropagation(),eQ.play("toggle_off"),t()},"aria-label":"Close modal",children:(0,s.jsx)(k,{className:"w-4 h-4"})}),(0,s.jsx)("img",{src:e.src||"/placeholder.svg",alt:e.name,className:"max-w-full max-h-[82vh] object-contain rounded-lg shadow-2xl",onClick:e=>e.stopPropagation(),onKeyDown:()=>{},role:"presentation"}),(0,s.jsxs)("div",{className:"mt-2 text-center pointer-events-none",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-[hsl(var(--primary))]",children:[e.match_prob,"% Match"]}),(0,s.jsx)("div",{className:"text-foreground text-sm font-medium",children:e.name})]})]})}):null}let e1={S:{cols:"grid-cols-2 sm:grid-cols-3 md:grid-cols-4",h:"w-40 h-40 sm:w-48 sm:h-48 md:w-52 md:h-52",showLabel:!0,showBar:!0},A:{cols:"grid-cols-3 sm:grid-cols-4 md:grid-cols-5",h:"w-28 h-28 sm:w-32 sm:h-32 md:w-40 md:h-40",showLabel:!0,showBar:!0},B:{cols:"grid-cols-4 sm:grid-cols-5 md:grid-cols-7",h:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28",showLabel:!0,showBar:!1},C:{cols:"grid-cols-6 sm:grid-cols-8 md:grid-cols-10",h:"w-14 h-14 sm:w-16 sm:h-16 md:w-18 md:h-18",showLabel:!1,showBar:!1},D:{cols:"grid-cols-8 sm:grid-cols-10 md:grid-cols-12",h:"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14",showLabel:!1,showBar:!1}};function e2({images:e,totalClicks:t,finishReasonText:r,onReset:a}){let[o,n]=(0,l.useState)(null),i=(0,l.useRef)(!1);(0,l.useEffect)(()=>{i.current||(eQ.init(),i.current=!0)},[]);let d=e.map(e=>({...e,r_eff:e.rating-e.sigma,raw_rating:Math.round(e.rating),raw_sigma:Math.round(e.sigma),match_prob:Math.round(100*(1/(1+Math.pow(10,(1500-e.rating)/400))))})).sort((e,t)=>t.r_eff-e.r_eff),c=e.reduce((e,t)=>e+t.sigma,0)/e.length,u=[...d],m=[];for(let e of eJ){let t=u.filter(t=>t.r_eff>=e.minReff);u=u.filter(t=>t.r_eff<e.minReff),t.length>0&&m.push({tier:e,items:t})}return(0,s.jsxs)("div",{className:"animate-fade-in",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center pt-1 mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,s.jsx)(eV,{className:"w-6 h-6 text-emerald-500"}),(0,s.jsx)("h2",{className:"text-3xl md:text-4xl font-black text-emerald-500",children:"測定完了"})]}),(0,s.jsx)("p",{className:"text-[12px] text-muted-foreground leading-tight",children:r})]}),(0,s.jsx)("div",{className:"bg-card border border-border rounded-xl p-2 md:p-3 shadow-lg",children:(0,s.jsx)("div",{className:"space-y-2",children:m.map(({tier:e,items:t})=>{let r=e1[e.id]??e1.D;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(0,s.jsx)("div",{className:`shrink-0 rounded ${e.badgeClass} border flex items-center justify-center font-black leading-none ${"S"===e.id?"w-6 h-6 text-[18px]":"A"===e.id?"w-5 h-5 text-[15px]":"w-4 h-4 text-[13.5px]"}`,children:e.name}),(0,s.jsx)("span",{className:`text-[14px] font-semibold ${e.color} leading-none`,children:e.desc}),(0,s.jsx)("span",{className:"text-[9px] text-muted-foreground font-mono leading-none",children:t.length}),(0,s.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,s.jsx)("div",{className:`grid ${r.cols} ${"C"===e.id?"gap-0":"gap-1"}`,children:t.map(t=>{let a=d.indexOf(t),o="GOD"===t.eliteType;return(0,s.jsxs)("button",{type:"button",onClick:()=>{eQ.play("swipe"),setTimeout(()=>eQ.play("tap"),100),n(t)},onMouseEnter:()=>eQ.play("tap"),className:`group relative rounded-md overflow-hidden border ${e.bgClass} transition-all hover:scale-[1.04] cursor-pointer text-left flex flex-col ${!r.showLabel?r.h:""} ${"C"===e.id?"p-0":""}`,children:[(0,s.jsx)("div",{className:"flex justify-center flex-1",children:(0,s.jsxs)("div",{className:`relative ${r.h} flex items-center justify-center group-hover:scale-105 transition-transform`,children:[(0,s.jsx)("img",{src:t.src||"/placeholder.svg",alt:t.name,decoding:"async",className:"w-full h-full object-cover"}),(0,s.jsxs)("div",{className:`absolute top-px left-px font-mono font-bold bg-card/70 backdrop-blur-sm rounded-sm text-foreground/70 ${r.showLabel?"text-[9px] px-1 py-px":"text-[7px] px-0.5"}`,children:["#",a+1]}),o&&(0,s.jsx)("div",{className:"absolute inset-0 ring-1 ring-yellow-400/50 rounded-md pointer-events-none"})]})}),r.showLabel&&(0,s.jsxs)("div",{className:"px-2 py-1 bg-card/80",children:[(0,s.jsx)("div",{className:"flex items-center justify-between gap-1 mb-1",children:(0,s.jsx)("div",{className:"truncate text-sm font-semibold text-foreground leading-tight flex-1",children:t.name})}),(0,s.jsxs)("div",{className:"card-footer flex justify-between items-end",children:[(0,s.jsx)("div",{className:"flex items-center",children:r.showLabel&&t.eliteType&&(0,s.jsx)(eY,{type:t.eliteType})}),(0,s.jsxs)("div",{className:"score-container relative flex items-end",children:[(0,s.jsx)("span",{className:"text-xs font-medium text-foreground/70",children:"適合率"}),(0,s.jsxs)("span",{className:`text-2xl font-black leading-none ${o?"text-yellow-400":e.color}`,children:[t.match_prob,"%"]}),(0,s.jsx)("div",{className:`progress-bar ${o?"bg-yellow-400":e.gradientClass} absolute left-0 top-0 h-full rounded-full`,style:{width:`${t.match_prob}%`,zIndex:-1}})]})]})]}),!r.showLabel&&"C"===e.id&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-card/80 border-t border-border px-1 py-0.5",children:(0,s.jsx)("div",{className:"text-[8px] text-muted-foreground truncate text-center",children:t.name})})]},t.id)})})]},e.id)})})}),(0,s.jsx)("div",{className:"flex justify-center mt-4 mb-2",children:(0,s.jsx)("button",{type:"button",onClick:()=>{eQ.play("button"),setTimeout(()=>eQ.play("tap"),80),setTimeout(()=>eQ.play("tap"),160),setTimeout(()=>eQ.play("swipe"),240),setTimeout(()=>a(),350)},className:"   px-7 py-2.5 rounded-full text-sm font-bold   bg-emerald-500 text-white   hover:bg-emerald-600 hover:-translate-y-0.5   transition-all shadow-lg flex items-center gap-2   animate-pulse-glow   ",children:"もう一度ソートする"})})]}),(0,s.jsx)("div",{className:"fixed bottom-3 right-3 z-40 flex flex-col items-end gap-0.5 bg-card/80 backdrop-blur-sm border border-border rounded-lg px-2.5 py-1.5 shadow-md",children:[{l:"画像",v:String(e.length)},{l:"選択",v:String(t)},{l:"不確実",v:c.toFixed(1)},{l:"効率",v:(e.length/Math.max(t,1)).toFixed(2)}].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] leading-none",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:e.l}),(0,s.jsx)("span",{className:"font-mono font-bold text-foreground",children:e.v})]},e.l))}),(0,s.jsx)(e0,{image:o,onClose:()=>n(null)})]})}function e5(){let e=function(){let[e,t]=(0,l.useState)("upload"),[r,a]=(0,l.useState)([]),[o,n]=(0,l.useState)([]),[s,u]=(0,l.useState)([]),[m,p]=(0,l.useState)("exploration"),[h,g]=(0,l.useState)(0),[f,b]=(0,l.useState)(0),[x,v]=(0,l.useState)("完走"),[y,w]=(0,l.useState)(!1),[k,j]=(0,l.useState)("hidden"),[N,C]=(0,l.useState)([]),[M,z]=(0,l.useState)(!1),[R,E]=(0,l.useState)(0),S=(0,l.useRef)([]),T=(0,l.useRef)([]),L=(0,l.useRef)([]),A=(0,l.useRef)(0),U=(0,l.useRef)(0),$=(0,l.useRef)(0),_=(0,l.useRef)(null),I=(0,l.useRef)(0),O=(0,l.useRef)(!1),P=(0,l.useRef)("exploration"),D=(0,l.useRef)("完走"),G=(0,l.useRef)([]),B=(0,l.useRef)(new Set),W=(0,l.useCallback)(()=>{a([...S.current]),n([...G.current]),p(P.current),g(U.current),b(I.current),v(D.current)},[]),q=(0,l.useCallback)(async e=>{let t=0;for(let r=0;r<e.length;r++){let a=e[r];if(a.type.startsWith("image/"))try{let e=await c(a),r=new FileReader;r.onload=r=>{let o={id:Math.random(),name:a.name,src:r.target?.result,thumbnailUrl:e,rating:1500,sigma:150,viewCount:0,passCount:0,wins:0,status:"active",eliteType:null,isProcessing:!0};S.current=[...S.current,o],t++,W(),H(o.id,a)},r.readAsDataURL(a)}catch(r){console.error("Failed to generate thumbnail:",r);let e=new FileReader;e.onload=e=>{let r={id:Math.random(),name:a.name,src:e.target?.result,rating:1500,sigma:150,viewCount:0,passCount:0,wins:0,status:"active",eliteType:null};S.current=[...S.current,r],t++,W()},e.readAsDataURL(a)}}},[W]),H=(0,l.useCallback)(async(e,t)=>{try{B.current.add(e),E(e=>e+1),z(!0);let r=await d(t),a=S.current.findIndex(t=>t.id===e);if(-1!==a){let e=S.current[a];if(e.thumbnailUrl)try{URL.revokeObjectURL(e.thumbnailUrl)}catch(e){}e.thumbnailUrl=r,e.isProcessing=!1,S.current[a]=e,W()}}catch(e){console.error("Failed to compress image:",e)}finally{B.current.delete(e),E(e=>Math.max(0,e-1)),0===B.current.size&&z(!1)}},[W]),F=(0,l.useCallback)(e=>{S.current=S.current.filter(t=>t.id!==e),W()},[W]),V=(0,l.useCallback)(()=>{S.current.forEach(e=>{if(e.thumbnailUrl)try{URL.revokeObjectURL(e.thumbnailUrl)}catch(e){}}),B.current.clear(),E(0),z(!1),S.current=[],W()},[W]),K=()=>{S.current.forEach(e=>{e.sigma=Math.max(e.sigma,5)})},X=(0,l.useCallback)(()=>{let e=r.filter(e=>"active"===e.status).length,t=r.filter(e=>"frozen"===e.status).length,a=0;r.forEach(e=>{"active"===e.status&&(a+=e.sigma)});let o=A.current,n=o>0?Math.min(100,Math.floor((1-a/o)*100)):0;return{activeCount:e,frozenCount:t,progress:0===e?100:n}},[r]),Z=(0,l.useCallback)(async()=>{let e=new Audio("/assets/celebration.wav");if(e.volume=.1,e.play().catch(()=>{}),j("entering"),await new Promise(e=>setTimeout(e,50)),await new Promise(e=>setTimeout(e,600)),t("result"),W(),await new Promise(e=>setTimeout(e,50)),M){for(;B.current.size>0;)await new Promise(e=>setTimeout(e,100));j("leaving"),await new Promise(e=>setTimeout(e,50)),await new Promise(e=>setTimeout(e,600)),j("hidden")}else j("leaving"),await new Promise(e=>setTimeout(e,50)),await new Promise(e=>setTimeout(e,600)),j("hidden")},[W,M]),Q=(0,l.useCallback)(e=>{e.forEach(e=>{let t=new Image;t.src=e.src,t.decoding="async",t.width=1,t.height=1})},[]),J=(0,l.useCallback)(()=>{let e=S.current,t=e.filter(e=>"active"===e.status);if(t.length<2)return void Z();if(L.current.length>10&&L.current.slice(-10).filter(e=>"pass"===e.type).length>=4){D.current="パス過多 (枯渇)",Z();return}let r=O.current?4:6;t.length<r&&(r=t.length);let a=[...t];null!==_.current&&a.length>r&&(a=a.filter(e=>e.id!==_.current)),a.sort((e,t)=>{let r=1.5*e.rating+e.sigma;return 1.5*t.rating+t.sigma-r});let o=a[0],n=[o],s=a.slice(1);6===r?s=i(s):s.sort((e,t)=>Math.abs(e.rating-o.rating)-Math.abs(t.rating-o.rating));for(let e=0;e<r-1&&e<s.length;e++)n.push(s[e]);if((n=n.filter(e=>void 0!==e)).length<r&&a.length>0){let e=a.filter(e=>!n.includes(e)),t=r-n.length,o=i(e).slice(0,t);n=[...n,...o]}if(n.length<r){let t=e.filter(e=>"active"===e.status),a=r-n.length,o=i(t.filter(e=>!n.includes(e))).slice(0,a);n=[...n,...o]}let l=a.slice(0,Math.min(6,a.length));C(l),Q(l);let d=i(n),c=i(l);G.current=d,u(c),W()},[Z,W,Q]),Y=(0,l.useCallback)(()=>{let e=S.current.filter(e=>"active"===e.status);if(e.sort((e,t)=>t.rating-e.rating),!O.current){let t=e.filter(e=>e.sigma>90);(e.length>0?t.length/e.length:0)<=.35&&(O.current=!0)}if(P.current=O.current?"precision":"exploration",e.length>=2){let t=e[0],r=e[1],a=t.rating>1770&&t.viewCount>=4,o=t.rating>1600&&t.viewCount>=6&&t.rating-t.sigma>r.rating+ +r.sigma,n=t.rating>1520&&t.viewCount>=7&&t.rating-1.62*t.sigma>r.rating+1.62*r.sigma,s=a?"GOD":o?"STRONG":n?"STAT":null;if(s){t.status="frozen",t.eliteType=s;let e=new Audio("/assets/celebration.wav");e.volume=.3,e.play().catch(()=>{}),$.current=0,Y();return}}if(e.forEach(e=>{e.viewCount>=5&&e.rating<=1200&&(e.status="eliminated",$.current=0)}),e.forEach(e=>{e.viewCount>=10&&(e.rating>=1500?(e.status="frozen",e.eliteType="STAT"):e.status="eliminated",$.current=0)}),e.length>0&&e.length<=4){let t=e[0],r=e[e.length-1];if(e.reduce((e,t)=>e+t.viewCount,0)/e.length>=6&&t.rating-r.rating<50){D.current="好みの近似による自動終了",Z();return}}if(e.length>0){let t=Math.max(...e.map(e=>e.sigma));if("precision"===P.current&&t<30&&e.length>2){D.current="収束完了",Z();return}}W()},[Z,W]),ee=(0,l.useCallback)(async()=>{if(!(S.current.length<2)){if(M)for(t("upload");B.current.size>0;)await new Promise(e=>setTimeout(e,100));S.current.forEach(e=>{e.rating=1500,e.sigma=150,e.viewCount=0,e.passCount=0,e.wins=0,e.status="active",e.eliteType=null}),A.current=150*S.current.length,T.current=[],L.current=[],$.current=0,_.current=null,I.current=0,O.current=!1,P.current="exploration",D.current="完走",t("battle"),Y(),J()}},[Y,J,M]),et=()=>{T.current.push({imagesSnapshot:S.current.map(e=>({id:e.id,rating:e.rating,sigma:e.sigma,viewCount:e.viewCount,wins:e.wins})),actionLogCopy:[...L.current],phase:P.current,locked:O.current,streak:U.current,stalemate:$.current,lastWinner:_.current,clicks:I.current})},er=(0,l.useCallback)(e=>{if(et(),U.current=0,L.current.push({type:"win",id:e}),_.current=e,I.current++,"precision"===P.current&&($.current++,$.current>5)){let t=G.current[0];if(G.current.forEach(e=>{let r=S.current.find(t=>t.id===e.id),a=S.current.find(e=>e.id===t.id);r&&a&&r.rating<a.rating&&(t=e)}),t.id!==e){let e=S.current.find(e=>e.id===t.id);e&&(e.rating>=1520?(e.status="frozen",e.eliteType="STAT"):e.status="eliminated",$.current=0)}}let t=S.current.find(t=>t.id===e),r=G.current.filter(t=>t.id!==e).map(e=>S.current.find(t=>t.id===e.id));if(!t)return;let a=1/(1+.15*t.viewCount);r.forEach(e=>{if(!e)return;let o=1/(1+Math.pow(10,(e.rating-t.rating)/400)),n=1/(1+Math.pow(10,(t.rating-e.rating)/400)),s=.6;0===e.wins&&(s=.2),t.rating+=100*a*(1-o)/Math.sqrt(r.length),e.rating+=100*a*(0-n)*s;let l=.92;e.viewCount>8&&(l=.7),e.sigma*=l,e.viewCount++});let o=.85;t.viewCount>8&&(o=.7),t.sigma*=o,t.viewCount++,t.wins++,K(),Y(),J()},[Y,J]),ea=(0,l.useCallback)(()=>{if(et(),U.current++,_.current=null,I.current++,L.current.push({type:"pass",id:null}),U.current>=3){D.current="手動終了(連続パス)",Z();return}G.current.forEach(e=>{let t=S.current.find(t=>t.id===e.id);t&&(t.passCount++,t.viewCount++,t.rating-=30,t.sigma*=.75,t.passCount>=2&&(t.status="eliminated"))}),K(),Y(),S.current.filter(e=>"active"===e.status).length<2?(D.current="枯渇",Z()):(w(!0),setTimeout(()=>w(!1),400),J())},[Y,J,Z]),eo=(0,l.useCallback)(()=>{if(0===T.current.length)return;let e=T.current.pop();e.imagesSnapshot.forEach(e=>{let t=S.current.find(t=>t.id===e.id);t&&(t.rating=e.rating,t.sigma=e.sigma,t.viewCount=e.viewCount,t.wins=e.wins)}),L.current=e.actionLogCopy,P.current=e.phase,O.current=e.locked,U.current=e.streak,$.current=e.stalemate,_.current=e.lastWinner,I.current=e.clicks,W(),J()},[W,J]),en=(0,l.useCallback)(()=>{!S.current.every(e=>0===e.viewCount)&&confirm("現在の学習データで分析結果を表示しますか？")&&(D.current="手動終了",Z())},[Z]),es=(0,l.useCallback)(()=>{confirm("最初に戻りますか？")&&el()},[]),el=(0,l.useCallback)(()=>{t("upload"),T.current=[],L.current=[],G.current=[],I.current=0,U.current=0,$.current=0,_.current=null,O.current=!1,P.current="exploration",S.current.forEach(e=>{e.rating=1500,e.sigma=150,e.viewCount=0,e.wins=0,e.passCount=0,e.status="active",e.eliteType=null}),W()},[W]);return{screen:e,images:r,currentGroup:o,currentPhase:m,globalPassStreak:h,totalClicks:f,finishReasonText:x,shaking:y,shutterState:k,canUndo:T.current.length>0,isProcessing:M,processingCount:R,addImages:q,deleteImage:F,clearAllImages:V,startBattle:ee,choose:er,passMatch:ea,undo:eo,finishEarly:en,quitSort:es,resetToStartScreen:el,getProgressInfo:X}}(),t=(0,l.useCallback)(t=>{if("battle"===e.screen){for(let r=1;r<=6;r++)t.key===String(r)&&e.currentGroup[r-1]&&e.choose(e.currentGroup[r-1].id);"Backspace"===t.key&&e.undo(),(" "===t.key||"0"===t.key||"p"===t.key)&&(t.preventDefault(),e.passMatch()),"Enter"===t.key&&e.finishEarly()}"upload"===e.screen&&"Enter"===t.key&&e.startBattle()},[e]);return(0,l.useEffect)(()=>{"battle"===e.screen&&e.currentGroup.length>0&&document.querySelectorAll('button[aria-label*="arrow"]').forEach(e=>{e.style.display="none"})},[e.screen,e.currentGroup.length]),(0,l.useEffect)(()=>(document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)),[t]),(0,s.jsxs)("main",{className:"relative min-h-screen overflow-x-hidden",children:[(0,s.jsx)(y,{}),(0,s.jsx)("div",{className:"fixed inset-0 z-0 pointer-events-none bg-grid-pattern opacity-80",style:{maskImage:"radial-gradient(ellipse at center, black 50%, transparent 100%)",WebkitMaskImage:"radial-gradient(ellipse at center, black 50%, transparent 100%)"}}),(0,s.jsx)("div",{className:"gradient-overlay"}),(0,s.jsx)("div",{className:`
          fixed top-0 left-0 w-full h-full z-[100] bg-gradient-to-r from-teal-500 via-emerald-500 to-teal-500 shutter-stripes
          flex items-center justify-center shadow-2xl
          ${"hidden"===e.shutterState?"opacity-0 pointer-events-none":"entering"===e.shutterState?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
        `,style:{transform:"hidden"===e.shutterState?"translateX(-100%)":"entering"===e.shutterState?"translateX(0)":"translateX(100%)",transition:"transform 0.6s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.6s cubic-bezier(0.19, 1, 0.22, 1)"}}),(0,s.jsxs)("div",{className:"relative z-10 p-4 md:p-6",children:["upload"===e.screen&&(0,s.jsx)(eD,{images:e.images,isProcessing:e.isProcessing,processingCount:e.processingCount,onAddImages:e.addImages,onDeleteImage:e.deleteImage,onClearAll:e.clearAllImages,onStart:e.startBattle}),"battle"===e.screen&&(0,s.jsx)(eF,{currentGroup:e.currentGroup,currentPhase:e.currentPhase,globalPassStreak:e.globalPassStreak,progressInfo:e.getProgressInfo(),shaking:e.shaking,canUndo:e.canUndo,onChoose:e.choose,onPass:e.passMatch,onUndo:e.undo,onFinishEarly:e.finishEarly,onQuit:e.quitSort}),"result"===e.screen&&(0,s.jsx)(e2,{images:e.images,totalClicks:e.totalClicks,finishReasonText:e.finishReasonText,onReset:e.resetToStartScreen})]})]})}e.s(["default",()=>e5],31713)}]);